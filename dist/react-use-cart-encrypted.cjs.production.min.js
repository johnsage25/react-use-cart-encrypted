"use strict";var t=require("react");function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var r=require("secure-ls");function n(e,n){var a=t.useState((function(){try{var t=new r({encodingType:"aes",encryptionSecret:"pJs(?&4Zyp6dbA`(Qh&s&8]s94C<Lx<H#&Vk5#cn3ttfexeHHv6W#/LW(3v4r8UkE!Cy92]Kf"});return void 0!==t&&t.get(e)||n}catch(t){return n}})),i=a[0],o=a[1];return[i,function(t){try{var n=new r({encodingType:"aes",encryptionSecret:"pJs(?&4Zyp6dbA`(Qh&s&8]s94C<Lx<H#&Vk5#cn3ttfexeHHv6W#/LW(3v4r8UkE!Cy92]Kf"}),a=t instanceof Function?t(i):t;o(a),n.set(e,a)}catch(t){console.log(t)}}]}var a={items:[],isEmpty:!0,totalItems:0,totalUniqueItems:0,cartTotal:0,metadata:{}},i=t.createContext(a),o=function(t){return void 0===t&&(t=12),[].concat(Array(t)).map((function(){return(~~(36*Math.random())).toString(36)})).join("")};function u(t,r){switch(r.type){case"SET_ITEMS":return c(t,r.payload);case"ADD_ITEM":var n=[].concat(t.items,[r.payload]);return c(t,n);case"UPDATE_ITEM":var i=t.items.map((function(t){return t.id!==r.id?t:e({},t,r.payload)}));return c(t,i);case"REMOVE_ITEM":var o=t.items.filter((function(t){return t.id!==r.id}));return c(t,o);case"EMPTY_CART":return a;case"CLEAR_CART_META":return e({},t,{metadata:{}});case"SET_CART_META":return e({},t,{metadata:e({},r.payload)});case"UPDATE_CART_META":return e({},t,{metadata:e({},t.metadata,r.payload)});default:throw new Error("No action specified")}}var c=function(t,r){void 0===t&&(t=a);var n=f(r),i=0===n;return e({},a,t,{items:d(r),totalItems:p(r),totalUniqueItems:n,cartTotal:s(r),isEmpty:i})},d=function(t){return t.map((function(t){return e({},t,{itemTotal:t.price*t.quantity})}))},s=function(t){return t.reduce((function(t,e){return t+e.quantity*e.price}),0)},p=function(t){return t.reduce((function(t,e){return t+e.quantity}),0)},f=function(t){return t.length};exports.CartProvider=function(r){var c=r.children,d=r.id,s=r.defaultItems,p=void 0===s?[]:s,f=r.onSetItems,y=r.onItemAdd,m=r.onItemUpdate,E=r.onItemRemove,T=r.storage,v=void 0===T?n:T,l=r.metadata,A=d||o(),I=v(d?"react-use-cart-"+A:"react-use-cart-encrypted",JSON.stringify(e({id:A},a,{items:p,metadata:l}))),M=I[1],C=t.useReducer(u,JSON.parse(I[0])),_=C[0],h=C[1];return t.useEffect((function(){M(JSON.stringify(_))}),[_,M]),t.createElement(i.Provider,{value:e({},_,{getItem:function(t){return _.items.find((function(e){return e.id===t}))},inCart:function(t){return _.items.some((function(e){return e.id===t}))},setItems:function(t){h({type:"SET_ITEMS",payload:t.map((function(t){return e({},t,{quantity:t.quantity||1})}))}),f&&f(t)},addItem:function(t,r){if(void 0===r&&(r=1),!t.id)throw new Error("You must provide an `id` for items");if(!(r<=0)){var n=_.items.find((function(e){return e.id===t.id}));if(!n&&!t.hasOwnProperty("price"))throw new Error("You must pass a `price` for new items");if(!n){var a=e({},t,{quantity:r});return h({type:"ADD_ITEM",payload:a}),void(y&&y(a))}var i=e({},t,{quantity:n.quantity+r});h({type:"UPDATE_ITEM",id:t.id,payload:i}),m&&m(i)}},updateItem:function(t,e){t&&e&&(h({type:"UPDATE_ITEM",id:t,payload:e}),m&&m(e))},updateItemQuantity:function(t,r){if(r<=0)return E&&E(t),void h({type:"REMOVE_ITEM",id:t});var n=_.items.find((function(e){return e.id===t}));if(!n)throw new Error("No such item to update");var a=e({},n,{quantity:r});h({type:"UPDATE_ITEM",id:t,payload:a}),m&&m(a)},removeItem:function(t){t&&(h({type:"REMOVE_ITEM",id:t}),E&&E(t))},emptyCart:function(){return h({type:"EMPTY_CART"})},clearCartMetadata:function(){h({type:"CLEAR_CART_META"})},setCartMetadata:function(t){t&&h({type:"SET_CART_META",payload:t})},updateCartMetadata:function(t){t&&h({type:"UPDATE_CART_META",payload:t})}})},c)},exports.createCartIdentifier=o,exports.initialState=a,exports.useCart=function(){var e=t.useContext(i);if(!e)throw new Error("Expected to be wrapped in a CartProvider");return e};
//# sourceMappingURL=react-use-cart-encrypted.cjs.production.min.js.map
